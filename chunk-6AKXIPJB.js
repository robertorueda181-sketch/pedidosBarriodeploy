import{c as W,f as Y,g as J,i as K,k as X,l as Z,r as ee}from"./chunk-UFUKKXXD.js";import{a as te}from"./chunk-QXEN7B67.js";import{a as z,c as H}from"./chunk-7C7BYA4G.js";import{c as $}from"./chunk-N5S4MXVG.js";import{r as q,t as G}from"./chunk-NXBUWKV5.js";import{$b as I,Ab as A,Bb as i,Cb as n,Db as s,Kb as k,Na as R,Ob as b,Qb as u,Sa as a,U as O,Z as m,a as D,ac as o,b as T,bc as V,ca as y,cc as c,da as S,ea as x,ec as B,fa as w,fc as L,gb as N,gc as j,ic as U,lc as F,ma as p,mc as P,nc as Q,v as M,vb as _,wb as C,xb as E,yb as h,zb as f}from"./chunk-7543YNFF.js";var v=class r{http=m($);config=m(te);search(e){return this.http.get(`${this.config.apiUrl}/Search?q=${e}`).pipe(M(t=>t.map(l=>T(D({},l),{imageUrl:this.transformImageUrl(l.imageUrl)}))))}transformImageUrl(e){if(!e)return null;if(e.startsWith("http"))return e;let t=e.split(/[/\\]/).pop();return t?`${this.config.baseUrl}/images/${t}`:null}static \u0275fac=function(t){return new(t||r)};static \u0275prov=O({token:r,factory:r.\u0275fac,providedIn:"root"})};var ne=()=>["TODOS","NEGOCIO","SERVICIO","INMUEBLE"],oe=(r,e,t)=>({"bg-blue-500":r,"bg-purple-500":e,"bg-green-500":t}),ae=(r,e)=>e.id+e.type;function le(r,e){if(r&1&&(i(0,"label",20),s(1,"input",31),i(2,"span",32),o(3),n()()),r&2){let t=e.$implicit;a(3),V(t)}}function se(r,e){if(r&1){let t=k();i(0,"button",33),b("click",function(){let g=y(t).$implicit,d=u();return S(d.setTab(g))}),o(1),n()}if(r&2){let t=e.$implicit,l=u();I(l.activeTab()===t?"bg-white text-[#1A365D] shadow-md":"text-gray-500 hover:text-gray-700"),a(),c(" ",t==="TODOS"?"Todos":t.toLowerCase()+"s"," ")}}function ce(r,e){r&1&&(i(0,"div",28),s(1,"div",34),i(2,"p",35),o(3,"Buscando las mejores coincidencias..."),n()())}function de(r,e){if(r&1&&(i(0,"div",42)(1,"span",53),o(2),P(3,"number"),n()()),r&2){let t=u().$implicit;a(2),c("S/. ",Q(3,1,t.price))}}function me(r,e){if(r&1){let t=k();i(0,"div",37),b("click",function(){let g=y(t).$implicit,d=u(2);return S(d.goToDetail(g))}),i(1,"div",38),s(2,"img",39),i(3,"div",40)(4,"span",41),o(5),n()(),_(6,de,4,3,"div",42),n(),i(7,"div",43)(8,"h3",44),o(9),n(),i(10,"p",45),o(11),n(),i(12,"div",46)(13,"div",47),x(),i(14,"svg",48),s(15,"path",49),n(),o(16),n(),w(),i(17,"div",50),x(),i(18,"svg",51),s(19,"path",52),n()()()()()}if(r&2){let t=e.$implicit;a(2),A("src",t.imageUrl||"assets/banner1.png",R)("alt",t.title),a(2),I(F(9,oe,t.type==="NEGOCIO",t.type==="SERVICIO",t.type==="INMUEBLE")),a(),c(" ",t.type," "),a(),C(t.price?6:-1),a(3),c(" ",t.title," "),a(2),c(" ",t.description," "),a(5),c(" ",t.location||"Varias ubicaciones"," ")}}function pe(r,e){if(r&1&&(i(0,"div",29),h(1,me,20,13,"div",36,ae),n()),r&2){let t=u();a(),f(t.filteredResults)}}function ue(r,e){r&1&&(i(0,"div",30)(1,"div",54),o(2,"\u{1F50D}"),n(),i(3,"h3",55),o(4,"No encontramos coincidencias"),n(),i(5,"p",56),o(6,"Intenta con otros t\xE9rminos o ajusta los filtros."),n()())}var ie=class r{route=m(z);router=m(H);searchService=m(v);searchQuery=p("");activeTab=p("TODOS");results=p([]);isLoading=p(!1);categories=["Restaurantes","Salud","Hogar","Tecnolog\xEDa","Venta","Alquiler"];selectedCategory=p("");ngOnInit(){this.route.queryParams.subscribe(e=>{e.q&&(this.searchQuery.set(e.q),this.performSearch())})}performSearch(){this.searchQuery().trim()&&(this.isLoading.set(!0),this.searchService.search(this.searchQuery()).subscribe({next:e=>{this.results.set(e),this.isLoading.set(!1)},error:e=>{console.error("Error performing search",e),this.isLoading.set(!1)}}))}setTab(e){this.activeTab.set(e)}get filteredResults(){return this.activeTab()==="TODOS"?this.results():this.results().filter(e=>e.type===this.activeTab())}onSearch(){this.searchQuery().trim()&&this.router.navigate([],{relativeTo:this.route,queryParams:{q:this.searchQuery()},queryParamsHandling:"merge"})}goToDetail(e){e.type==="NEGOCIO"&&e.url?this.router.navigateByUrl("/"+e.url):e.type==="INMUEBLE"?this.router.navigate(["/inmueble",e.id]):e.type==="SERVICIO"&&this.router.navigate(["/servicio",e.id])}static \u0275fac=function(t){return new(t||r)};static \u0275cmp=N({type:r,selectors:[["app-search-results"]],decls:44,vars:4,consts:[[1,"min-h-screen","bg-gray-50","pt-24","pb-12"],[1,"max-w-7xl","mx-auto","px-6"],[1,"mb-12"],[1,"max-w-3xl","mx-auto"],[1,"relative","group",3,"submit"],[1,"relative","flex","items-center"],[1,"absolute","left-6","text-gray-400","group-focus-within:text-[#1A365D]","transition-colors"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-6","h-6"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"],["type","search","name","search","placeholder","Buscar negocios, servicios o inmuebles...",1,"w-full","bg-white","rounded-2xl","pl-16","pr-36","py-5","text-lg","shadow-xl","focus:outline-none","focus:ring-4","focus:ring-[#1A365D]/10","transition-all","border-none",3,"ngModelChange","ngModel"],["type","submit",1,"absolute","right-3","bg-[#1A365D]","hover:bg-[#2C5282]","text-white","px-8","py-3","rounded-xl","font-bold","transition-all","shadow-lg"],[1,"mt-4","text-gray-500","text-center"],[1,"font-bold","text-[#1A365D]"],[1,"flex","flex-col","lg:flex-row","gap-8"],[1,"w-full","lg:w-64","space-y-8"],[1,"bg-white","p-6","rounded-3xl","shadow-sm","border","border-gray-100"],[1,"font-black","text-lg","mb-6","text-gray-900"],[1,"space-y-4"],[1,"font-bold","text-sm","text-gray-400","uppercase","tracking-wider"],[1,"space-y-2"],[1,"flex","items-center","space-x-3","cursor-pointer","group"],[1,"mt-8","pt-8","border-t","border-gray-50"],[1,"font-bold","text-sm","text-gray-400","uppercase","tracking-wider","mb-4"],["type","range",1,"w-full","accent-[#1A365D]"],[1,"flex","justify-between","text-sm","font-bold","text-gray-600"],[1,"flex-grow"],[1,"flex","space-x-2","mb-8","bg-gray-100","p-1.5","rounded-2xl","w-fit"],[1,"px-6","py-2.5","rounded-xl","font-bold","text-sm","transition-all","capitalize",3,"class"],[1,"flex","flex-col","items-center","justify-center","py-20"],[1,"grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-3","gap-6"],[1,"text-center","py-20","bg-white","rounded-3xl","border-2","border-dashed","border-gray-200"],["type","checkbox",1,"w-5","h-5","rounded","border-gray-300","text-[#1A365D]","focus:ring-[#1A365D]"],[1,"text-gray-600","group-hover:text-[#1A365D]","transition-colors"],[1,"px-6","py-2.5","rounded-xl","font-bold","text-sm","transition-all","capitalize",3,"click"],[1,"animate-spin","rounded-full","h-12","w-12","border-4","border-[#1A365D]","border-t-transparent"],[1,"mt-4","text-gray-500","font-bold"],[1,"group","bg-white","rounded-3xl","shadow-sm","hover:shadow-xl","transition-all","duration-500","cursor-pointer","overflow-hidden","border","border-gray-100","flex","flex-col"],[1,"group","bg-white","rounded-3xl","shadow-sm","hover:shadow-xl","transition-all","duration-500","cursor-pointer","overflow-hidden","border","border-gray-100","flex","flex-col",3,"click"],[1,"relative","h-48","overflow-hidden"],[1,"w-full","h-full","object-cover","group-hover:scale-105","transition-transform","duration-500",3,"src","alt"],[1,"absolute","top-4","left-4"],[1,"text-white","px-3","py-1","rounded-lg","text-xs","font-black","uppercase","shadow-lg"],[1,"absolute","bottom-4","right-4","bg-white/90","backdrop-blur-md","px-4","py-1.5","rounded-xl","shadow-lg"],[1,"p-6","flex-grow","flex","flex-col"],[1,"font-black","text-xl","text-gray-900","mb-2","group-hover:text-[#1A365D]","transition-colors"],[1,"text-gray-500","text-sm","mb-4","line-clamp-2"],[1,"mt-auto","pt-4","border-t","border-gray-50","flex","items-center","justify-between"],[1,"flex","items-center","text-gray-400","text-xs","font-bold"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","mr-1"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"],[1,"w-8","h-8","bg-gray-50","rounded-full","flex","items-center","justify-center","text-[#1A365D]","group-hover:bg-[#1A365D]","group-hover:text-white","transition-colors"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 5l7 7-7 7"],[1,"text-[#1A365D]","font-black"],[1,"text-6xl","mb-4"],[1,"text-xl","font-black","text-gray-900","mb-2"],[1,"text-gray-500"]],template:function(t,l){t&1&&(i(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"form",4),b("submit",function(){return l.onSearch()}),i(5,"div",5)(6,"div",6),x(),i(7,"svg",7),s(8,"path",8),n()(),w(),i(9,"input",9),j("ngModelChange",function(d){return L(l.searchQuery,d)||(l.searchQuery=d),d}),n(),i(10,"button",10),o(11," Buscar "),n()()(),i(12,"p",11),o(13," Mostrando resultados para: "),i(14,"span",12),o(15),n()()()(),i(16,"div",13)(17,"aside",14)(18,"div",15)(19,"h3",16),o(20,"Filtros"),n(),i(21,"div",17)(22,"h4",18),o(23,"Categor\xEDas"),n(),i(24,"div",19),h(25,le,4,1,"label",20,E),n()(),i(27,"div",21)(28,"h4",22),o(29,"Rango de Precio"),n(),i(30,"div",17),s(31,"input",23),i(32,"div",24)(33,"span"),o(34,"S/. 0"),n(),i(35,"span"),o(36,"S/. 10,000+"),n()()()()()(),i(37,"main",25)(38,"div",26),h(39,se,2,3,"button",27,E),n(),_(41,ce,4,0,"div",28)(42,pe,3,0,"div",29)(43,ue,7,0,"div",30),n()()()()),t&2&&(a(9),B("ngModel",l.searchQuery),a(6),c('"',l.searchQuery(),'"'),a(10),f(l.categories),a(14),f(U(3,ne)),a(2),C(l.isLoading()?41:l.filteredResults.length>0?42:43))},dependencies:[G,ee,Z,W,Y,J,X,K,q],styles:[".line-clamp-2[_ngcontent-%COMP%]{display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden}input[type=range][_ngcontent-%COMP%]{height:6px;-webkit-appearance:none;background:#e2e8f0;border-radius:10px}input[type=range][_ngcontent-%COMP%]::-webkit-slider-thumb{-webkit-appearance:none;width:18px;height:18px;background:#1a365d;border-radius:50%;cursor:pointer;border:2px solid white;box-shadow:0 2px 4px #0000001a}.animate-slide-in[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_slideIn .5s ease-out forwards}@keyframes _ngcontent-%COMP%_slideIn{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}"]})};export{ie as SearchResultsComponent};
