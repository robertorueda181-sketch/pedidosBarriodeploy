import{a as l}from"./chunk-QXEN7B67.js";import{c as m}from"./chunk-N5S4MXVG.js";import{U as p,Z as s,a as i,b as t,v as n}from"./chunk-7543YNFF.js";var u=class a{http=s(m);config=s(l);getNegocios(){return this.http.get(`${this.config.apiUrl}/Negocios`).pipe(n(e=>e.map(o=>this.transformNegocio(o))))}getNegocioBySlug(e){return this.getNegocios().pipe(n(o=>o.find(r=>r.nombre?.toLowerCase().includes(e.toLowerCase())||r.urlNegocio?.toLowerCase().includes(e.toLowerCase()))))}getNegocioByCodigo(e){return this.http.get(`${this.config.apiUrl}/Negocios/codigo/${e}`).pipe(n(o=>t(i({},o),{productos:o.productos.map(r=>t(i({},r),{urlImagen:r.urlImagen?`${this.config.baseUrl}/${r.urlImagen.replace(/\\/g,"/")}`:"https://images.unsplash.com/photo-1546069901-ba9599a7e63c?auto=format&fit=crop&w=800&q=80"}))})))}transformNegocio(e){let o=[];e.imagenes&&e.imagenes.length>0&&(o=e.imagenes.map(g=>{let c=g.urlImagen?g.urlImagen.split(/[/\\]/).pop():"";return{urlImagen:c?`${this.config.baseUrl}/images/${c}`:"",descripcion:g.descripcion}}));let r=o.length>0?o[0].urlImagen:e.urlImagen?`${this.config.baseUrl}/images/${e.urlImagen.split(/[/\\]/).pop()}`:"https://images.unsplash.com/photo-1560448072-283bd0dfaa55?auto=format&fit=crop&w=800&q=60";return t(i({},e),{imagenes:o,urlImagen:r})}static \u0275fac=function(o){return new(o||a)};static \u0275prov=p({token:a,factory:a.\u0275fac,providedIn:"root"})};export{u as a};
